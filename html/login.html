<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>login</title>
    <link rel="stylesheet" type="text/css" href="logreg.css">
    <script src="jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#login").click(function() {
                //验证是否输入用户名和密码
                if ($("#username").val().length == 0) {

                    return alert("请输入用户名!");
                }
                if ($("#password").val().length == 0) {
                    return alert("请输入密码!");
                }

                $.ajax({
                    //url待定，暂时填写本地url
                    url: "http://127.0.0.1:8080/DataServer/local/logincheck",
                    type: "POST",
                    dataType: 'json',
                    async: false,
                    data: {
                        username: $('#username').val(),
                        password: $('#password').val()
                    },
                    success: function(res) {
                        var username = res.nickname;
                        alert(JSON.stringify(res));
                        $(location).attr('href', 'http://127.0.0.1:8085/home.html');
                        $(window).attr('location', 'http://127.0.0.1:8085/home.html');
                        $(location).prop('href', 'http://127.0.0.1:8085/home.html');
                        //window.location.href = 'home.html';
                    },
                    error: function(err) {
                        alert(JSON.stringify(err));

                    }
                })

            })

        });
    </script>
</head>

<body>
    <div class="wrapper">
        <div class="container">

            <h1>欢迎登录</h1>
            <div class="form">
                <input type="text" placeholder="用户名" id='username'>
                <input type="password" placeholder="密码" id='password'>
                <button id="login">登录</button>
                <button id="register-button"><a href="register.html" class="cc">注册</a></button>
                <p>
                    <a href="changePassword.html" class="forget">忘记密码&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                    <a href="home.html" class="return">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;返回首页</a>

                </p>
            </div>
        </div>
    </div>
</body>

</html>